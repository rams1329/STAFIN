<div class="h-full bg-white border-r border-gray-200 shadow-sm">
      <ul class="text-gray-600 mt-4 space-y-1 px-3">
        
        <!-- Static Admin Menus (Always Visible for Admins) -->
        <ng-container *ngIf="currentUser?.isAdmin">
          <!-- Dashboard -->
          <a routerLink="/admin/dashboard" 
             routerLinkActive="sidebar-link-active" 
             [routerLinkActiveOptions]="{ exact: true }"
             class="sidebar-link group">
            <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
            </svg>
            <span class="sidebar-label">Dashboard</span>
          </a>
          
          <!-- Job Management -->
          <a routerLink="/admin/jobs" 
             routerLinkActive="sidebar-link-active" 
             [routerLinkActiveOptions]="{ exact: true }"
             class="sidebar-link group">
            <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2h8z"/>
            </svg>
            <span class="sidebar-label">Job Postings</span>
          </a>
          
          <!-- Add Job -->
          <a routerLink="/admin/jobs/create" 
             routerLinkActive="sidebar-link-active" 
             [routerLinkActiveOptions]="{ exact: true }"
             class="sidebar-link group">
            <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
            </svg>
            <span class="sidebar-label">Add Job</span>
          </a>
          
          <!-- User Management -->
          <a routerLink="/admin/users" 
             routerLinkActive="sidebar-link-active" 
             [routerLinkActiveOptions]="{ exact: true }"
             class="sidebar-link group">
            <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"/>
            </svg>
            <span class="sidebar-label">Users</span>
          </a>
          
          <!-- Contact Messages -->
          <a routerLink="/admin/contact-messages" 
             routerLinkActive="sidebar-link-active" 
             [routerLinkActiveOptions]="{ exact: true }"
             class="sidebar-link group">
            <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
            <span class="sidebar-label">Messages</span>
            <span *ngIf="unreadCount > 0" 
                  class="notification-badge">
              {{unreadCount}}
            </span>
          </a>
          
          <!-- Master Data Dropdown -->
          <div class="sidebar-link cursor-pointer group" (click)="toggleMasterData()">
            <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/>
            </svg>
            <span class="sidebar-label">Master Data</span>
            <svg class="dropdown-arrow" 
                 [class.rotate-180]="showMasterData" 
                 fill="currentColor" viewBox="0 0 20 20">
              <path d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.23 8.29a.75.75 0 01.02-1.06z"/>
            </svg>
          </div>
          
          <!-- Master Data Submenu -->
          <div *ngIf="showMasterData" class="submenu">
            <a routerLink="/admin/master-data/departments" 
               routerLinkActive="sidebar-link-active"
               [routerLinkActiveOptions]="{ exact: true }"
               class="submenu-link">
              <svg class="submenu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
              </svg>
              <span class="sidebar-label">Departments</span>
            </a>
            <a routerLink="/admin/master-data/job-functions" 
               routerLinkActive="sidebar-link-active"
               [routerLinkActiveOptions]="{ exact: true }"
               class="submenu-link">
              <svg class="submenu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
              <span class="sidebar-label">Job Functions</span>
            </a>
            <a routerLink="/admin/master-data/job-types" 
               routerLinkActive="sidebar-link-active"
               [routerLinkActiveOptions]="{ exact: true }"
               class="submenu-link">
              <svg class="submenu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
              </svg>
              <span class="sidebar-label">Job Types</span>
            </a>
            <a routerLink="/admin/master-data/locations" 
               routerLinkActive="sidebar-link-active"
               [routerLinkActiveOptions]="{ exact: true }"
               class="submenu-link">
              <svg class="submenu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
              <span class="sidebar-label">Locations</span>
            </a>
            <a routerLink="/admin/master-data/experience-levels" 
               routerLinkActive="sidebar-link-active"
               [routerLinkActiveOptions]="{ exact: true }"
               class="submenu-link">
              <svg class="submenu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M13 10V3L4 14h7v7l9-11h-7z"/>
              </svg>
              <span class="sidebar-label">Experience Levels</span>
            </a>
            <a routerLink="/admin/master-data/roles" 
               routerLinkActive="sidebar-link-active"
               [routerLinkActiveOptions]="{ exact: true }"
               class="submenu-link">
              <svg class="submenu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
              </svg>
              <span class="sidebar-label">Roles</span>
            </a>
            <a routerLink="/admin/master-data/menus" 
               routerLinkActive="sidebar-link-active"
               [routerLinkActiveOptions]="{ exact: true }"
               class="submenu-link">
              <svg class="submenu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
              </svg>
              <span class="sidebar-label">Menu Management</span>
            </a>
          </div>
        </ng-container>

        <!-- Dynamic Menus from Backend -->
        <ng-container *ngIf="dynamicMenus.length > 0">
          <!-- Separator -->
          <div *ngIf="currentUser?.isAdmin" class="border-t border-gray-200 my-2"></div>
          
          <!-- Custom Dynamic Menus -->
          <div class="text-xs text-gray-400 px-2 py-1 uppercase tracking-wider" *ngIf="currentUser?.isAdmin">
            Custom Menus
          </div>
          
          <ng-container *ngFor="let menu of getTopLevelMenus()">
            <!-- Parent Menu -->
            <div *ngIf="hasChildren(menu); else singleMenu">
              <div class="sidebar-link cursor-pointer group" (click)="toggleDynamicMenu(menu.id!)">
                <i [class]="menu.icon || 'fas fa-circle'" class="sidebar-icon"></i>
                <span class="sidebar-label">{{ menu.name }}</span>
                <svg class="dropdown-arrow" 
                     [class.rotate-180]="isDynamicMenuOpen(menu.id!)" 
                     fill="currentColor" viewBox="0 0 20 20">
                  <path d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.23 8.29a.75.75 0 01.02-1.06z"/>
                </svg>
              </div>
              
              <!-- Children Submenu -->
              <div *ngIf="isDynamicMenuOpen(menu.id!)" class="submenu">
                <a *ngFor="let child of menu.children" 
                   [routerLink]="child.url" 
                   routerLinkActive="sidebar-link-active"
                   class="submenu-link">
                  <i [class]="child.icon || 'fas fa-circle'" class="submenu-icon"></i>
                  <span class="sidebar-label">{{ child.name }}</span>
                </a>
              </div>
            </div>
            
            <!-- Single Menu Template -->
            <ng-template #singleMenu>
              <a [routerLink]="menu.url" 
                 routerLinkActive="sidebar-link-active" 
                 class="sidebar-link group">
                <i [class]="menu.icon || 'fas fa-circle'" class="sidebar-icon"></i>
                <span class="sidebar-label">{{ menu.name }}</span>
              </a>
            </ng-template>
          </ng-container>
        </ng-container>

        <!-- Loading State -->
        <div *ngIf="loadingMenus" class="text-center py-4">
          <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"></div>
          <span class="text-xs text-gray-500 mt-2">Loading menus...</span>
        </div>

        <!-- No Dynamic Menus Message -->
        <div *ngIf="!loadingMenus && dynamicMenus.length === 0 && !currentUser?.isAdmin" 
             class="text-center py-8 px-4">
          <i class="fas fa-info-circle text-gray-400 text-2xl mb-2"></i>
          <p class="text-xs text-gray-500">No custom menus available</p>
        </div>
      </ul>
    </div>